## Проанализированные файлы:
- `import_to_db.py` -> `expenses.db`
- `dashboard_statistics.py` -> `dashboard_statistics.json`
- `sum_mileage_by_vehicle.py` -> `expenses.db` 
- `generate_expenses.py` -> `expenses.csv`
- `generate_mileage.py` -> `expenses.db` 
- `generate_vehicles.py` -> `expenses.db` 
- `statistics.py` -> `expenses_statistics.json` (или `.txt`)
- `expenses.csv` (Исходные данные)
- `expenses.db` (База данных)
- `expenses_outliers.csv` (Выходные данные)
- `expenses_statistics.json` (Выходные данные)
- `dashboard_statistics.json` (Выходные данные)

# Описание структуры анализа

## Структура проекта

### Основные файлы

#### `import_to_db.py`
Модуль для импорта данных о расходах и транспортных средствах в базу данных SQLite.

- Функциональность:
  - Создаёт новую базу данных `expenses.db` (или обновляет существующую).
  - Создаёт таблицы: `vehicles`, `categories`, `expenses`.
  - Импортирует данные из файлов `expenses.csv` (или других CSV/JSON файлов, если указаны).
  - Генерирует тестовые данные, если не указаны файлы для импорта.
  - Устанавливает связи между таблицами через внешние ключи.
- Выходные файлы:
  - `expenses.db` — основная база данных проекта, содержащая все импортированные и сгенерированные данные.
  - (опционально) Логи процесса импорта выводятся в консоль.

#### `dashboard_statistics.py`
- Модуль для анализа и визуализации статистики расходов
- Функциональность:
  - Подключается к SQLite базе данных
  - Выполняет SQL-запросы для получения данных о расходах
  - Вычисляет статистику по категориям:
    - Общая сумма расходов
    - Среднее значение расходов
    - Максимальный расход
    - Минимальный расход
    - Количество записей
  - Группирует данные по категориям
  - Форматирует результаты в структурированный JSON
- Выходные файлы:
  - `dashboard_statistics.json` - файл со статистикой в формате:
    ```json
    {
      "category_statistics": {
        "category_name": {
          "total": float,
          "average": float,
          "max": float,
          "min": float,
          "count": int
        }
      }
    }
    ```
  - Логи в консоли о процессе анализа

Файл `dashboard_statistics.py` предназначен для создания данных, необходимых для вывода статистики на дашборд. В результате его работы формируется файл `dashboard_statistics.json`, в котором содержится агрегированная и структурированная статистика по расходам, категориям и транспортным средствам на основе данных из базы данных.

Этот файл используется для визуализации и анализа расходов в интерфейсе дашборда.

#### `sum_mileage_by_vehicle.py`
Модуль для подсчёта и обновления общего пробега по каждому транспортному средству.

- Функциональность:
  - Подключается к базе данных `expenses.db`.
  - Суммирует значения расходов по категории "пробег" (обычно category_id = 9) для каждой машины.
  - Обновляет столбец `total_mileage` в таблице `vehicles` на основе этих данных.
- Выходные файлы:
  - Обновлённая база данных `expenses.db` (значения пробега для каждой машины актуализированы).
  - (опционально) Логи процесса обновления выводятся в консоль.

---

#### `import_to_db.py` (ещё раз, если используется для других форматов)
- Если используется для импорта из JSON:
  - Импортирует данные из файлов с расширением `.json` (например, `expenses.json`).
  - Выходной файл тот же — `expenses.db`.

---

#### `expenses.csv`
Пример исходного файла с расходами.
- Используется как источник данных для импорта.
- Не изменяется в процессе работы скриптов.

---

#### `expenses.db`
Главный выходной файл для всех операций импорта и обновления данных.
- Содержит таблицы: `vehicles`, `categories`, `expenses`.
- Обновляется при каждом запуске скриптов импорта и подсчёта пробега.

#### `generate_expenses.py`
Модуль для генерации случайных данных о расходах.

- Функциональность:
  - Создает синтетические записи о расходах для тестирования.
  - Генерирует данные с датами, суммами, случайными категориями и описаниями.
  - Может быть использован для создания большого объема данных для стресс-тестирования.
- Выходные файлы:
  - `expenses.csv` — CSV-файл с сгенерированными данными о расходах. Этот файл затем может быть импортирован в базу данных с помощью `import_to_db.py`.

---

#### `generate_mileage.py`
Модуль для генерации случайных данных о пробеге.

- Функциональность:
  - Генерирует случайные значения пробега для каждой записи расхода (для категории пробег).
  - Предназначен для создания реалистичных данных о пробеге, связанных с расходами.
- Выходные файлы:
  - Влияет на данные в `expenses.db`, добавляя или обновляя информацию о пробеге в связанных записях.
  - (опционально) Может выводить промежуточные данные в консоль.

---

#### `generate_vehicles.py`
Модуль для генерации случайных данных о транспортных средствах.

- Функциональность:
  - Создает синтетические записи о транспортных средствах.
  - Генерирует данные о номере, производителе, модели, годе выпуска, типе, вместимости, расходе топлива и цене.
- Выходные файлы:
  - Влияет на данные в `expenses.db`, добавляя или обновляя информацию о транспортных средствах в таблице `vehicles`.
  - (опционально) Может выводить промежуточные данные в консоль.

---

#### `statistics.py`
Общий модуль для выполнения различных статистических расчетов.

- Функциональность:
  - Выполняет базовый статистический анализ данных.
  - Может включать функции для расчета средних значений, медиан, стандартных отклонений и других статистических показателей.
- Выходные файлы:
  - (зависит от реализации) Может выводить результаты в консоль или сохранять в файлах формата `.txt` или `.json` (например, `expenses_statistics.json`).

---

#### `expenses_outliers.csv`
Файл, содержащий информацию о выбросах (аномальных значениях) в данных о расходах.

- Функциональность:
  - Создается отдельным модулем или скриптом, который определяет выбросы.
  - Помогает выявлять необычно высокие или низкие расходы для дальнейшего анализа.
- Источник:
  - Обычно генерируется скриптом, который анализирует `expenses.csv` или `expenses.db`.

---

#### `expenses_statistics.json`
Файл, содержащий общую статистику по расходам, отличную от статистики дашборда.

- Функциональность:
  - Может содержать более детальные или специализированные статистические отчеты, которые не используются напрямую в дашборде.
  - Пример содержания: суммарные расходы по всем категориям, анализ трендов, сводные таблицы.
- Источник:
  - Обычно генерируется модулем `statistics.py` или другими скриптами, выполняющими глубокий анализ данных.

