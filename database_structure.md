# Структура базы данных

База данных `data.db` содержит следующие таблицы:

## 1. Таблица `categories`
Содержит категории расходов.

| Столбец | Тип | Описание |
|---------|-----|-----------|
| id | INTEGER | Первичный ключ |
| name | TEXT | Название категории (уникальное) |

Категории:
1. Топливо
2. Ремонт
3. Налоги
4. Штрафы
5. Аренда
6. Амортизация
7. Админ_расходы
8. Логистика

## 2. Таблица `expenses`
Содержит записи о расходах.

| Столбец | Тип | Описание |
|---------|-----|-----------|
| id | INTEGER | Первичный ключ, автоинкремент |
| date | TEXT | Дата расхода (формат: YYYY-MM-DD) |
| amount | REAL | Сумма расхода в рублях |
| category_id | INTEGER | Внешний ключ на таблицу categories |
| ID_car | INTEGER | ID транспортного средства |

## 3. Таблица `vehicles`
Содержит информацию о транспортных средствах.

| Столбец | Тип | Описание |
|---------|-----|-----------|
| id | INTEGER | Первичный ключ |
| plate_number | TEXT | Номерной знак |
| model | TEXT | Модель транспортного средства |
| year | INTEGER | Год выпуска |
| total_mileage | REAL | Общий пробег в километрах |

## 4. Таблица `mileage`
Содержит записи о пробеге транспортных средств.

| Столбец | Тип | Описание |
|---------|-----|-----------|
| id | INTEGER | Первичный ключ, автоинкремент |
| date | TEXT | Дата записи (формат: YYYY-MM-DD) |
| vehicle_id | INTEGER | ID транспортного средства |
| mileage | REAL | Пробег в километрах за день |

## 5. Таблица `monthly_budget`
Содержит ежемесячный бюджет по категориям расходов.

| Столбец | Тип | Описание |
|---------|-----|-----------|
| Месяц | TEXT | Месяц (формат: MM) |
| Год | TEXT | Год (формат: YYYY) |
| ID_машины | INTEGER | ID транспортного средства |
| Категория_ID | INTEGER | Внешний ключ на таблицу categories |
| Планируемый_бюджет_руб | REAL | Планируемый бюджет в рублях |
| Фактические_расходы_руб | REAL | Фактические расходы в рублях |
| Процент_от_плана | REAL | Процент фактических расходов от плана |

## Связи между таблицами

1. `expenses.category_id` → `categories.id`
   - Каждая запись расхода связана с одной категорией

2. `expenses.ID_car` → `vehicles.id`
   - Каждая запись расхода связана с одним транспортным средством

3. `mileage.vehicle_id` → `vehicles.id`
   - Каждая запись пробега связана с одним транспортным средством

4. `monthly_budget.Категория_ID` → `categories.id`
   - Каждая запись бюджета связана с одной категорией

5. `monthly_budget.ID_машины` → `vehicles.id`
   - Каждая запись бюджета связана с одним транспортным средством

## Особенности

1. Все даты хранятся в текстовом формате YYYY-MM-DD
2. Все денежные значения хранятся в рублях
3. Все значения пробега хранятся в километрах
4. В таблице `monthly_budget` планируемый бюджет может быть выше фактических расходов, но не всегда
5. В таблице `expenses` категории ограничены значениями от 1 до 8 